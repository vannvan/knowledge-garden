## äº‹ä»¶å¤„ç†å‡½æ•°
### äº‹ä»¶å¥æŸ„
æ‰€è°“çš„äº‹ä»¶å¥æŸ„å°±æ˜¯ä¸€ä¸ªå°†å…ƒç´ çš„ç‰¹å®šäº‹ä»¶ä¸æŸä¸ªå‡½æ•°å…³è”èµ·æ¥ï¼Œæ¯”å¦‚ `onclick`ã€`onmouseover` ç­‰éƒ½æ˜¯å¥æŸ„ï¼Œå®ƒä»¬ä¼šæŒ‡å‘ä¸€ä¸ªç»™å®šçš„å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯äº‹ä»¶å‘ç”Ÿæ—¶è¦æ‰§è¡Œçš„æ“ä½œã€‚ä¾‹å¦‚ï¼š
```javascript
div.onclick = function() {
	// todo...
}

// ğŸ‘†ğŸ» æ•´ä½“å«åš äº‹ä»¶å¥æŸ„ï¼Œå…¶ä¸­ onclick å•ç‹¬æ‹†å‡ºæ¥å« å¥æŸ„
// é€šå¸¸è¯´çš„ äº‹ä»¶å¥æŸ„çš„ç»‘å®šå½¢å¼ å°±æ˜¯ä¸Šé¢è¿™ç§å½¢å¼
```
### äº‹ä»¶æº
äº‹ä»¶ä½œç”¨åœ¨è°èº«ä¸Šï¼Œè°å°±æ˜¯äº‹ä»¶æºã€‚
æ¯”å¦‚ç½‘é¡µå…ƒç´ ä¸­ a æ ‡ç­¾æœ‰ `onclick` äº‹ä»¶ï¼Œå½“ç‚¹å‡» a å‘ç”Ÿ `onclick` äº‹ä»¶æ—¶ï¼Œäº‹ä»¶æºå°±æ˜¯ a æ ‡ç­¾ã€‚
### å¦‚ä½•ç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°
#### å†…è”æ–¹å¼
```javascript
<div onclick="test()" onmouseover="test2()"></div>
```
#### JSè·å–DOMç»‘å®š
```javascript
const ele  = document.getElementById("box")
ele.onclick = function() {};

// åŒæ—¶ç»‘å®šå¤šä¸ªï¼Œåé¢çš„å›è¦†ç›–å‰é¢çš„
ele.onclick = function() { console.log(1); };
ele.onclick = function() { console.log(2); };
```
#### äº‹ä»¶ç›‘å¬å™¨

- IE9ä»¥ä¸‹ä¸å…¼å®¹ï¼ŒW3Cè§„èŒƒ
- åŒä¸€å…ƒç´ å¯ä»¥ç»‘å®šå¤šä¸ªäº‹ä»¶ï¼Œå½¼æ­¤ä¸ä¼šè¦†ç›–
```javascript
const ele  = document.getElementById("box")
ele.addEventListener('click', function() {
    this.innerHTML = 'åŠ è½½ä¸­..';
}, false)
ele.addEventListener('click', function() {
    console.log('åŠ è½½æ›´å¤šäº‹ä»¶');
}, false)
// 2ä¸ªç»‘å®šéƒ½ä¼šæ‰§è¡Œ
```
#### attachEvent

- IE8åŠä»¥ä¸‹
- **this æŒ‡å‘ window**
- ä¸ addEventListener ä¸åŒï¼Œç»‘å®šåŒä¸€å¼•ç”¨å€¼çš„å‡½æ•°ï¼Œ**ç»‘å®šå‡ æ¬¡æ‰§è¡Œå‡ æ¬¡**
```javascript
oBtn.attachEvent('onclick', function() {
    test.call(oBtn);
})
function test() {} // è§£å†³attachEvent ä¸­thisæŒ‡å‘é—®é¢˜

// ä¸ä¼šè¦†ç›–
oBtn.attachEvent('onclick', test, false);
oBtn.attachEvent('onclick', test, false);
function test() {
    console.log(1);
}
// æ‰§è¡Œä¸¤æ¬¡æ‰“å°
```
### è§£é™¤äº‹ä»¶ç»‘å®š

- elem.onclick = null; / elem.onclick = false;
- elem.removeEventListener(å‚æ•°éœ€è¦å’Œç»‘å®šæ—¶å€™çš„å‚æ•°å®Œå…¨ç›¸åŒ)
## äº‹ä»¶çš„å†’æ³¡ä¸æ•è·
å­çº§ä¼šå‘çˆ¶çº§ä¼ é€’è‡ªå·±çš„äº‹ä»¶ï¼Œå¦‚æœçˆ¶çº§ä¹Ÿæœ‰ç›¸åŒäº‹ä»¶åˆ™å“åº”

- å†’æ³¡ï¼šäº‹ä»¶ä» DOM å­å…ƒç´ å‘çˆ¶çº§ä¼ é€’ï¼Œè§¦å‘çˆ¶çº§çš„ç›¸åŒç±»å‹çš„äº‹ä»¶
   - å³ä½¿å­å…ƒç´ åœ¨è§†è§‰ä¸Šä¸åœ¨çˆ¶å…ƒç´ å®¹å™¨å†…ï¼Œä¹Ÿä¼šå‘ä¸Šä¼ é€’
   - çˆ¶å…ƒç´ ä¸ç»‘å®šåŒç±»å‹äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œç¥–çˆ¶ç»‘å®šï¼Œç¥–çˆ¶çš„äº‹ä»¶å¤„ç†å‡½æ•°ä»ç„¶ä¼šè§¦å‘
- æ•è·ï¼šè‡ªåµŒå¥—å…³ç³»çš„æœ€é¡¶å±‚ï¼Œå‘å­å…ƒç´ ä¼ é€’ï¼Œåˆ°äº‹ä»¶æº
- elem.addEventListener(äº‹ä»¶ç±»å‹ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œfalse) `falseäº‹ä»¶å†’æ³¡ï¼Œtrueäº‹ä»¶æ•è·`
- å…ˆæ•è·ï¼Œåå†’æ³¡ã€‚åˆ°äº‹ä»¶æºçš„æ—¶å€™ï¼ŒæŒ‰ç…§ç»‘å®šé¡ºåºæ‰§è¡Œ
   - æ–°ç‰ˆchromeäº‹ä»¶æºä¸å†æ ¹æ®ç»‘å®šé¡ºåºæ‰§è¡Œï¼Œè€Œæ˜¯ç»Ÿä¸€å˜æˆå…ˆæ•è·åå†’æ³¡ï¼Œå‚è€ƒ[https://juejin.cn/post/6965682915141386254](https://juejin.cn/post/6965682915141386254)
   - åˆ°äº‹ä»¶æºçš„æ—¶å€™ï¼Œå¤„äºtargeté˜¶æ®µï¼Œæ²¡æœ‰æ•è·orå†’æ³¡çš„è¯´æ³•ã€‚æ‰€ä»¥ä¸ç”¨careæ‰§è¡Œé¡ºåºã€‚ä»£ç å±‚é¢ä¸Šæ³¨æ„ä¸‹å°±è¡Œï¼Œæœ€å¥½å…ˆå†™æ•è·å†å†™å†’æ³¡
### é˜»æ­¢äº‹ä»¶å†’æ³¡
#### w3c: e.stopPropagation(); -> Event.prototype
```javascript
oDiv.addEventListener('click', function(e) {
	var e = e || window.event;
  e.stopPropagation(); 
}, false);
```
#### IE: e.cancelBubble = true;
```javascript
oDiv.addEventListener('click', function(e) {
	var e = e || window.event;
  e.cancelBubble = true;
}, false)
```
### å–æ¶ˆé»˜è®¤äº‹ä»¶
#### return false ï¼ˆä¸æ”¯æŒ addEventListener ä¸­ä½¿ç”¨ï¼‰
```javascript
document.oncontextmenu = function(e) {
	var e = e || window.event;
  return false;
}
```
#### e.preventDefault() ï¼ˆIE9ä¸å…¼å®¹ï¼‰
```javascript
document.oncontextmenu = function(e) {
	var e = e || window.event;
  e.preventDefault();
}
```
#### e.returnValue = false; ï¼ˆIE9ä»¥ä¸‹ï¼‰
```javascript
document.oncontextmenu = function(e) {
	var e = e || window.event;
  e.returnValue = false
}
```
### é˜»æ­¢ a æ ‡ç­¾è·³è½¬

- `href="javascript:;"`
- `href="javascript: void(0)"` ==> `void(0) ç­‰äº return 0`
- `e.preventDefault()`
## äº‹ä»¶æµ
### ä¸‰ä¸ªé˜¶æ®µ

- äº‹ä»¶æ•è·é˜¶æ®µ
- å¤„äºç›®æ ‡é˜¶æ®µ - ä»£ç æŒ‰å…ˆåé¡ºåºæ‰§è¡Œï¼ˆ**æ–°ç‰ˆchromeå…ˆæ•è·åå†’æ³¡**ï¼‰
- äº‹ä»¶å†’æ³¡é˜¶æ®µ
### DOMåˆ†çº§
#### DOM 0

- `onclick = ""`
- `ele.onclick = function() {}`
- `onmouseover`
- `onXXX`
#### DOM 1

- æ²¡æœ‰å®šä¹‰äº‹ä»¶æ¨¡å‹
#### DOM 2

- addEventListener(3ä¸ªå‚æ•°) -> W3Cè§„èŒƒ
- removeEventListener

ä¸‰ä¸ªçº§åˆ«æ²¡æœ‰é‡è¦ä¹‹åˆ†ï¼Œå¯ä»¥çœ‹æˆä¸åŒæ—¶æœŸå®šä¹‰çš„æ–°çš„ä½¿ç”¨æ–¹æ¡ˆ
### äº‹ä»¶å¯¹è±¡ â­ï¸
ä¸åŒæµè§ˆå™¨åŒºåˆ«
**targetã€srcElement** äº‹ä»¶æºå¯¹è±¡

- FFç«ç‹åªæœ‰ target
- IE åªæœ‰ srcElement
- Chrome ä¸¤è€…å…¼æœ‰
```javascript
wrapper.onclick = function(e) {
  var target = e.target || e.srcElement;
	console.log(e);
}
```
## äº‹ä»¶å§”æ‰˜

1. åœ¨å®¹å™¨ï¼ˆcontainerï¼‰ä¸Šæ”¾ä¸€ä¸ªå¤„ç†ç¨‹åºã€‚
2. åœ¨å¤„ç†ç¨‹åºä¸­ â€”â€” æ£€æŸ¥æºå…ƒç´  event.targetã€‚
3. å¦‚æœäº‹ä»¶å‘ç”Ÿåœ¨æˆ‘ä»¬æ„Ÿå…´è¶£çš„å…ƒç´ å†…ï¼Œé‚£ä¹ˆå¤„ç†è¯¥äº‹ä»¶ã€‚
## event.target å’Œ event.currentTarget çš„åŒºåˆ«

- target 		å½“å‰è§¦å‘äº‹ä»¶çš„å…ƒç´ 
- currentTarget 	ç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°çš„å…ƒç´ 
```html
<div class="content">
  <button>æŒ‰é’®</button>
</div>
<body>
  <script>
    const content = document.querySelector('.content')
    const btn = document.getElementsByName('button')
    content.addEventListener('click', function (e) {
      console.log(e.target)  // æŒ‡å‘çš„æ˜¯buttonèŠ‚ç‚¹
      console.log(e.currentTarget) // æŒ‡å‘çš„æ˜¯contentèŠ‚ç‚¹
    })
  </script>
</body>
```
## èµ„æ–™

- [https://www.yuque.com/baofengyuqianxi/vi4wte/aqgl3m](https://www.yuque.com/baofengyuqianxi/vi4wte/aqgl3m#KeP3z)
