# ç®—æ³•:åŠ¨æ€è§„åˆ’â…  
## æ¦‚å¿µ
åŠ¨æ€è§„åˆ’ï¼ˆdynamic programming, DPï¼‰æ˜¯ä¸€ç§å°†å¤æ‚é—®é¢˜åˆ†è§£æˆæ›´å°çš„å­é—®é¢˜æ¥è§£å†³çš„ä¼˜åŒ–æŠ€æœ¯ã€‚
åŠ¨æ€è§„åˆ’å’Œåˆ†è€Œæ²»ä¹‹æ˜¯ä¸åŒçš„æ–¹æ³•ã€‚åˆ†è€Œæ²»ä¹‹æ–¹æ³•æ˜¯æŠŠé—®é¢˜åˆ†è§£æˆç›¸äº’ç‹¬ç«‹çš„å­é—®é¢˜ï¼Œç„¶åç»„åˆå®ƒä»¬çš„ç­”æ¡ˆï¼Œè€ŒåŠ¨æ€è§„åˆ’åˆ™æ˜¯å°†é—®é¢˜åˆ†è§£æˆç›¸äº’ä¾èµ–çš„å­é—®é¢˜ã€‚
## æ€§è´¨

1. **æœ€ä¼˜å­ç»“æ„æ€§è´¨**ã€‚å¦‚æœé—®é¢˜çš„æœ€ä¼˜è§£æ‰€åŒ…å«çš„å­é—®é¢˜çš„è§£ä¹Ÿæ˜¯æœ€ä¼˜çš„ï¼Œæˆ‘ä»¬å°±ç§°è¯¥é—®é¢˜å…·æœ‰æœ€ä¼˜å­ç»“æ„æ€§è´¨ï¼ˆå³æ»¡è¶³æœ€ä¼˜åŒ–åŸç†ï¼‰ã€‚æœ€ä¼˜å­ç»“æ„æ€§è´¨ä¸ºåŠ¨æ€è§„åˆ’ç®—æ³•è§£å†³é—®é¢˜æä¾›äº†é‡è¦çº¿ç´¢ã€‚
2. **å­é—®é¢˜é‡å æ€§è´¨**ã€‚å­é—®é¢˜é‡å æ€§è´¨æ˜¯æŒ‡åœ¨ç”¨é€’å½’ç®—æ³•è‡ªé¡¶å‘ä¸‹å¯¹é—®é¢˜è¿›è¡Œæ±‚è§£æ—¶ï¼Œæ¯æ¬¡äº§ç”Ÿçš„å­é—®é¢˜å¹¶ä¸æ€»æ˜¯æ–°é—®é¢˜ï¼Œæœ‰äº›å­é—®é¢˜ä¼šè¢«é‡å¤è®¡ç®—å¤šæ¬¡ã€‚åŠ¨æ€è§„åˆ’ç®—æ³•æ­£æ˜¯åˆ©ç”¨äº†è¿™ç§å­é—®é¢˜çš„é‡å æ€§è´¨ï¼Œ**å¯¹æ¯ä¸€ä¸ªå­é—®é¢˜åªè®¡ç®—ä¸€æ¬¡**ï¼Œç„¶åå°†å…¶è®¡ç®—ç»“æœä¿å­˜åœ¨ä¸€ä¸ªè¡¨æ ¼ä¸­ï¼Œå½“å†æ¬¡éœ€è¦è®¡ç®—å·²ç»è®¡ç®—è¿‡çš„å­é—®é¢˜æ—¶ï¼Œåªæ˜¯åœ¨è¡¨æ ¼ä¸­ç®€å•åœ°æŸ¥çœ‹ä¸€ä¸‹ç»“æœï¼Œä»è€Œè·å¾—è¾ƒé«˜çš„æ•ˆç‡ã€‚
3. **æ— åæ•ˆæ€§**ï¼šå³æŸé˜¶æ®µçŠ¶æ€ä¸€æ—¦ç¡®å®šï¼Œå°±ä¸å—è¿™ä¸ªçŠ¶æ€ä»¥åå†³ç­–çš„å½±å“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŸçŠ¶æ€ä»¥åçš„è¿‡ç¨‹ä¸ä¼šå½±å“ä»¥å‰çš„çŠ¶æ€ï¼Œåªä¸å½“å‰çŠ¶æ€æœ‰å…³ã€‚ä¾‹å¦‚ï¼šf(4), f(10), f(14) ï¼Œæˆ‘ä»¬åªéœ€è¦æ±‚å‡ºä»–ä»¬çš„å…·ä½“å€¼ï¼Œä»–ä»¬çš„è®¡ç®—è¿‡ç¨‹å¯¹æˆ‘ä»¬ä¹‹åè¦æ±‚è§£çš„é—®é¢˜æ²¡æœ‰å½±å“ã€‚
## åº”ç”¨åœºæ™¯

1. èƒŒåŒ…é—®é¢˜ï¼šç»™å‡ºä¸€ç»„é¡¹ï¼Œå„è‡ªæœ‰å€¼å’Œå®¹é‡ï¼Œç›®æ ‡æ˜¯æ‰¾å‡ºæ€»å€¼æœ€å¤§çš„é¡¹çš„é›†åˆ
2. æœ€é•¿å…¬å…±å­åºåˆ—ï¼šæ‰¾å‡ºä¸€ç»„åºåˆ—çš„æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆå¯ç”±å¦ä¸€åºåˆ—åˆ é™¤å…ƒç´ ä½†ä¸æ”¹å˜ä½™ä¸‹å…ƒç´ çš„é¡ºåºè€Œå¾—åˆ°ï¼‰ã€‚
3. çŸ©é˜µé“¾ç›¸ä¹˜ï¼šç»™å‡ºä¸€ç³»åˆ—çŸ©é˜µï¼Œç›®æ ‡æ˜¯æ‰¾åˆ°è¿™äº›çŸ©é˜µç›¸ä¹˜çš„æœ€é«˜æ•ˆåŠæ³•ï¼ˆè®¡ç®—æ¬¡æ•°å°½å¯èƒ½å°‘ï¼‰ã€‚ç›¸ä¹˜è¿ç®—ä¸ä¼šè¿›è¡Œï¼Œè§£å†³æ–¹æ¡ˆæ˜¯æ‰¾åˆ°è¿™äº›çŸ©é˜µå„è‡ªç›¸ä¹˜çš„é¡ºåºã€‚
4. ç¡¬å¸æ‰¾é›¶ï¼šç»™å‡ºé¢é¢ä¸ºd1, â€¦, dnçš„ä¸€å®šæ•°é‡çš„ç¡¬å¸å’Œè¦æ‰¾é›¶çš„é’±æ•°ï¼Œæ‰¾å‡ºæœ‰å¤šå°‘ç§æ‰¾é›¶çš„æ–¹æ³•ã€‚
5. å›¾çš„å…¨æºæœ€çŸ­è·¯å¾„ï¼šå¯¹æ‰€æœ‰é¡¶ç‚¹å¯¹(u, v)ï¼Œæ‰¾å‡ºä»é¡¶ç‚¹uåˆ°é¡¶ç‚¹vçš„æœ€çŸ­è·¯å¾„ã€‚
## ä¸‰ä¸ªæ­¥éª¤

1. **åˆ’åˆ†**ï¼šæŒ‰ç…§é—®é¢˜çš„ç‰¹å¾ï¼ŒæŠŠé—®é¢˜åˆ†ä¸ºè‹¥å¹²é˜¶æ®µã€‚æ³¨æ„ï¼šåˆ’åˆ†åçš„é˜¶æ®µ**ä¸€å®šæ˜¯æœ‰åºçš„æˆ–è€…å¯æ’åº**çš„
2. **ç¡®å®šçŠ¶æ€å’ŒçŠ¶æ€å˜é‡**ï¼šå°†é—®é¢˜å‘å±•åˆ°å„ä¸ªé˜¶æ®µæ—¶æ‰€å¤„çš„å„ç§ä¸åŒçš„å®¢è§‚æƒ…å†µè¡¨ç°å‡ºæ¥ã€‚çŠ¶æ€çš„é€‰æ‹©è¦æ»¡è¶³æ— åç»­æ€§
3. **ç¡®å®šå†³ç­–å¹¶å†™å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹**ï¼šçŠ¶æ€è½¬ç§»å°±æ˜¯æ ¹æ®ä¸Šä¸€é˜¶æ®µçš„å†³ç­–å’ŒçŠ¶æ€æ¥å¯¼å‡ºæœ¬é˜¶æ®µçš„çŠ¶æ€ã€‚æ ¹æ®ç›¸é‚»ä¸¤ä¸ªé˜¶æ®µçŠ¶æ€ä¹‹é—´çš„è”ç³»æ¥ç¡®å®šå†³ç­–æ–¹æ³•å’ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹
4. **è¾¹ç•Œæ¡ä»¶**ï¼šçŠ¶æ€è½¬ç§»æ–¹ç¨‹æ˜¯ä¸€ä¸ªé€’æ¨å¼ï¼Œå› æ­¤éœ€è¦æ‰¾åˆ°é€’æ¨ç»ˆæ­¢çš„æ¡ä»¶
## ä¾‹é¢˜
### ç¡¬å¸æ‰¾é›¶
> ç»™å®šä¸åŒé¢é¢çš„ç¡¬å¸ coins å’Œä¸€ä¸ªæ€»é‡‘é¢ amountã€‚ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å¯ä»¥å‡‘æˆæ€»é‡‘é¢æ‰€éœ€çš„æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ç§ç¡¬å¸ç»„åˆèƒ½ç»„æˆæ€»é‡‘é¢ï¼Œè¿”å›Â -1ã€‚
> ä½ å¯ä»¥è®¤ä¸ºæ¯ç§ç¡¬å¸çš„æ•°é‡æ˜¯æ— é™çš„ã€‚
> [https://leetcode.cn/problems/gaM7Ch/](https://leetcode.cn/problems/gaM7Ch/)

#### è¿”å›æ•°é‡
##### ä»£ç å®ç°
```javascript
/**
 * è¿”å›é›¶é’±ä¸ªæ•°
 * ä»¥ [1, 2, 5, 10, 20], 36 ä¸ºä¾‹
 * é‡‘é¢ 1 çš„æœ€ä¼˜è§£ æ˜¯1 1
 * é‡‘é¢ 2 çš„æœ€ä¼˜è§£ æ˜¯1 è¿‡ç¨‹ï¼Œæ‰¾dp[2] ä¼šç»è¿‡ä¸¤è½® Aè½® dp[1]å’Œdp[1-1]+1 å–1 Bè½®dp[2]å’Œdp[2-1] å–1
 * é‡‘é¢ 3 çš„æœ€ä¼˜è§£ æ˜¯2 1+2 è¿‡ç¨‹ï¼Œæ‰¾dp[3] ä¼šç”¨åˆ°1å’Œ2 dp[3-1]+1 å‰è€…å°
 * é‡‘é¢ 4 çš„æœ€ä¼˜è§£ æ˜¯2 2+2 è¿‡ç¨‹ï¼Œæ‰¾dp[4] ä¼šç»è¿‡ä¸¤è½® A dp[4]å’Œdp[4-1]+1 å–3 B dp[4]å’Œdp[4-2]+1 å–2
 * æ•´ä½“çš„æ€è·¯å°±æ˜¯ å‡è®¾åœ¨è®¡ç®—dp(éœ€è¦æ‰¾é›¶çš„é’±)ä¹‹å‰ï¼Œæˆ‘ä»¬å·²ç»è®¡ç®—å‡ºdp(0) åˆ°dp(éœ€è¦æ‰¾é›¶çš„é’±-1)çš„å€¼ã€‚
 * @param coins
 * @param amount
 * @returns number
 */
const minCoinChange2 = (coins: number[], amount: number) => {
  const max = amount + 1
  const dp = new Array(max).fill(max)
  dp[0] = 0 // é‡‘é¢0çš„æœ€ä¼˜è§£ä¸º0
  // ä»1å¼€å§‹ï¼Œè¿™é‡Œå‡è®¾äº†æ‰€æœ‰1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5...çš„é’±éƒ½æœ‰ï¼Œç¬¬iå—é’±çš„æ—¶å€™ï¼Œ
  // è¦å»å°è¯•æ¯ä¸€ä¸ªå¯ç”¨é¢å€¼ä¸€æ¬¡i-coinï¼Œå› ä¸ºå‡è®¾å‰é¢å·²ç»æ‰¾åˆ°äº†å°‘1å…ƒé¢å€¼çš„æ•°
  for (let i = 1; i <= amount; i++) {
    // å†…å±‚éå†å°±æ˜¯æ•´ä¸ªé›¶é’±æ•°ç»„çš„è¿‡ç¨‹ï¼Œå½“å‰å‡‘çš„é’±æ•°iéƒ½å°è¯•ä¸€ä¸‹æ‰€æœ‰å¯ç”¨çš„é¢å€¼
    for (const coin of coins) {
      if (coin <= i) {
        dp[i] = Math.min(dp[i], dp[i - coin] + 1)
      }
    }
  }

  return dp[amount] > amount ? -1 : dp[amount]
}
```
##### å®ç°æ€è·¯
dp[i]çš„å«ä¹‰æ˜¯ï¼šæ‰¾é›¶iå…ƒé’±éœ€è¦çš„æœ€å°‘é›¶é’±ä¸ªæ•°
å¯¹äºdp[i]çš„æœ€ä¼˜è§£ï¼Œåœ¨coinå°äºiçš„æƒ…å†µä¸‹ï¼Œa. ç›´æ¥ä¹‹å‰å·²ç»è®¡ç®—å‡ºçš„dp[i]  b. i-coinçš„æœ€ä¼˜è§£+1 ï¼Œéœ€è¦æ±‚ä¸¤è€…çš„æœ€å°å€¼
é€šè¿‡å½’çº³æ³•ï¼Œä»¥ [1, 2, 5, 10, 20], 36 ä¸ºä¾‹ï¼Œå½“ä½¿ç”¨1æ—¶amount=dp[35]+1,å½“ä½¿ç”¨2æ—¶amount=dp[34]+1ï¼Œå½“ä½¿ç”¨5æ—¶amount=dp[31]+1,å½“ä½¿ç”¨10æ—¶ï¼Œamount=dp[26]+1... å³è®¤ä¸ºæ¯ä¸ªé‡‘é¢å‰æˆ–è®¸å­˜åœ¨ç€æ¯”å½“å‰é‡‘é¢æœ¬èº«æ›´å°‘çš„è§£æ³•ï¼Œä»¥ä¸Š**dp[i] = Math.min(dp[i], dp[i - coin] + 1)**å°±æ˜¯åœ¨å®ç°è¿™ä¸ªç¯èŠ‚çš„ã€‚
#### è¿”å›é›¶é’±æ•°ç»„
##### ä»£ç å®ç°
```javascript

/**
 * è¿”å›é›¶é’±æ•°ç»„
 * ä»¥ [1, 2, 5, 10, 20], 36 ä¸ºä¾‹
 * ä¼šå¯¹æ‰€æœ‰å°äºamountçš„é‡‘é¢è®¡ç®—minCoinChangeçš„ç»“æœ
 * @param coin é’±çš„é¢é¢æ•°ç»„
 * @param amount éœ€è¦æ‰¾çš„é’±
 * @returns number[]
 */

const minCoinChange = (coins: number[], amount: number) => {
  const cache = {}
  const makeChange = (value: number) => {
    if (!value) return []
    if (cache[value]) return cache[value]
    let lastMin: number[] = [] // æœ€ç»ˆçš„æœ€ä¼˜è§£
    let preMin: number[] = [] // æ—¢æ˜¯å°äºå½“å‰é¢é¢çš„æŸä¸ªé¢é¢çš„æœ€ä¼˜è§£ï¼Œä¹Ÿæ˜¯åç»­value-coins[i]çš„æœ€ä¼˜è§£
    let newAmount: number
    for (let i = 0; i < coins.length; i++) {
      const coin = coins[i]
      newAmount = value - coin // å‰©ä¸‹çš„éœ€è¦æ‰¾çš„é’±
      if (newAmount >= 0) {
        preMin = makeChange(newAmount) // åœ¨coinsæ²¡ç”¨å®Œä¹‹å‰ï¼Œå¯¹å‰©ä½™çš„é’±æ‰¾æœ€å°çš„ç»“æœ
      }
      // å½“åˆ°36çš„æ—¶å€™ï¼Œæ­¤æ—¶coins[i] 1å…ƒçš„æ—¶å€™ preMin å·²ç»ä» 35å…ƒæ‹¿åˆ°äº† [5,10,20] (preMin.length || !newAmount)æˆç«‹,
      // åŒæ—¶preMin.length=3 lastMin.length - 1=0ä¸æˆç«‹  !lastMin.lengthæˆç«‹
      // newAmount ä¸º35æˆç«‹
      if (
        newAmount >= 0 &&
        (preMin.length < lastMin.length - 1 || !lastMin.length) &&
        (preMin.length || !newAmount)
      ) {
        // preMinçš„å­˜åœ¨æ˜¯ç”¨æ¥å­˜å‚¨æ¯ä¸€è½®ä½¿ç”¨coins[i]çš„æ—¶å€™ï¼Œå½“å‰æ•°é¢æ˜¯å¦åœ¨ value-coins[i]çš„æ—¶å€™æ‰¾åˆ°äº†æœ€ä¼˜è§£
        lastMin = [coin].concat(preMin)
        console.log('new min for', lastMin, value)
      }
    }
    cache[value] = lastMin
    return cache[value]
  }

  return makeChange(amount)
}
```
##### å®ç°è¦ç‚¹
æ•´ä½“æ€è·¯æ˜¯å¯¹å°äºç­‰äºæ‰€æ±‚é‡‘é¢amountçš„æœ€ä¼˜è§£å»ºç«‹ä¸€ä¸ªcacheï¼Œåœ¨é€’å½’é‡Œç›´æ¥æ›´æ–°amountå¯¹åº”ä¸‹æ ‡çš„æœ€ä¼˜è§£ã€‚
æ¯æ¬¡é€’å½’éœ€åˆå§‹åŒ–æœ€ç»ˆçš„æœ€ä¼˜è§£ã€forå¾ªç¯æ‰€éœ€çš„æœ¬æ¬¡æ‰¾å®Œé’±çš„æœ€ä¼˜è§£ã€å’Œå‰©ä½™éœ€è¦æ‰¾çš„é’±ã€‚
æœ€é•¿çš„ifæ¡ä»¶æ€ä¹ˆç†è§£å‘¢ï¼Ÿç»è¿‡ä¸€æ¬¡æ‰¾é’±åï¼Œ**preMin<lastMin.length - 1 || **!**lastMin.length  **å³å‰©ä½™é‡‘é¢æ‰¾é’±çš„æ–¹å¼å·²ç»æ¯”ä¸Šæ¬¡æ‰¾çš„æ›´å°‘äº†æˆ–è¿˜æ²¡æœ‰æœ€ä¼˜è§£(å‰è€…ä¸€èˆ¬ç¬¬ä¸€è½®ä¸ä¼šæ‰§è¡Œï¼Œåè€…ä¸€èˆ¬åªæœ‰ç¬¬ä¸€è½®æ‰§è¡Œ)
**preMin.length || !newAmount  **å‰è€…ç¬¬ä¸€è½®ä¸ä¼šæ‰§è¡Œï¼Œåè€…æ‰¾å®Œäº†ä¸ä¼šæ‰§è¡Œ
### åˆ‡ç»³å­
> ç»™ä½ ä¸€æ ¹é•¿åº¦ä¸º n çš„ç»³å­ï¼Œè¯·æŠŠç»³å­å‰ªæˆæ•´æ•°é•¿åº¦çš„ m æ®µï¼ˆmã€néƒ½æ˜¯æ•´æ•°ï¼Œn>1å¹¶ä¸”m>1ï¼‰ï¼Œæ¯æ®µç»³å­çš„é•¿åº¦è®°ä¸º k[0],k[1]...k[m-1] ã€‚è¯·é—® k[0]*k[1]*...*k[m-1] å¯èƒ½çš„æœ€å¤§ä¹˜ç§¯æ˜¯å¤šå°‘ï¼Ÿä¾‹å¦‚ï¼Œå½“ç»³å­çš„é•¿åº¦æ˜¯8æ—¶ï¼Œæˆ‘ä»¬æŠŠå®ƒå‰ªæˆé•¿åº¦åˆ†åˆ«ä¸º2ã€3ã€3çš„ä¸‰æ®µï¼Œæ­¤æ—¶å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯æ˜¯18ã€‚
> [https://leetcode.cn/problems/jian-sheng-zi-lcof/](https://leetcode.cn/problems/jian-sheng-zi-lcof/)

#### ä»£ç å®ç°
```javascript
/**
 * åˆ‡ç»³å­ï¼Œè¿”å›æœ€å¤§ä¹˜ç§¯
 * @param length
 * @returns number
 */
const cutTheRope = (length: number) => {
  // ä¸èƒ½åˆ‡
  if (length < 2) {
    return 0
  }
  // åªèƒ½ä»ä¸­é—´åˆ‡
  if (length == 2) {
    return 1
  }
  // åªèƒ½åˆ‡ä¸º 1 1 1 æˆ– 1 2 æ‰€ä»¥æœ€å¤§ä¸º2
  if (length === 3) {
    return 2
  }

  const dp = new Array(length + 1)
  dp[0] = 0
  dp[1] = 1
  // ç»³å­é•¿åº¦ä¸º2æˆ–3æ—¶ï¼Œä¸è¿›è¡Œæ‹†åˆ†ï¼Œæœ€å¤§ä¹˜ç§¯ä¸ºç»³å­çš„é•¿åº¦
  dp[2] = 2
  dp[3] = 3

  for (let i = 4; i <= length; i++) {
    dp[i] = 0
    let max = 0
    // è‡³å°‘åˆ‡ä¸€åˆ€ï¼Œæ‰€ä»¥ä»1å¼€å§‹ï¼Œåˆ‡è¿‡ä¸­é—´å€¼ä»¥åï¼Œä¸ä¸­é—´å€¼ä»¥å‰çš„è®¡ç®—ç»“æœä¸€æ ·ï¼Œæ‰€ä»¥åªç”¨ç®—å‡ºå‰é¢éƒ¨åˆ†çš„ç»“æœï¼Œå› æ­¤ j<=i/2
    for (let j = 1; j <= i / 2; j++) {
      const result = dp[j] * dp[i - j]
      if (max < result) {
        max = result
      }
      dp[i] = max
    }
  }

  return dp[length]
}
// cutTheRope(8)  18  åˆ‡æ³•æ˜¯2 3 3  dp[2]=2 dp[3]=3 dp[4]=4 dp[5]=6
```
#### å®ç°æ€è·¯
dp[i]çš„å«ä¹‰æ˜¯ï¼šié•¿åº¦çš„ç»³å­ï¼Œå¯ä»¥æ‹†åˆ†çš„é•¿åº¦çš„æœ€å¤§ä¹˜ç§¯
åœ¨äºå½’çº³æ€»ç»“ç»³å­çš„åˆ‡æ³•å’Œæœ€å¤§ä¹˜ç§¯çš„å…³ç³»ï¼Œä»¥åŠç»³å­åˆ‡åˆ°ä¸€åŠä¹‹åï¼Œåé¢çš„ç»“æœè‚¯å®šæ˜¯å‰é¢å·²ç»ç®—å‡ºæ¥çš„è¿™ä¸ªç•Œé™ï¼Œæ‰æ˜¯è§„åˆ’çš„æ„ä¹‰ï¼Œ dp[j] * dp[i - j] ä¼šæ›´æ–°æ¯ä¸€ç§é•¿åº¦çš„æœ€å¤§ä¹˜ç§¯
æ›´å¥½çš„è§£ï¼š
### èƒŒåŒ…é—®é¢˜
#### ä»£ç å®ç°
```javascript

/**
 * è·å–æœ€å¤§ä»·å€¼ç»„åˆçš„ç‰©å“ä½ç½®
 * @param n æœ€å¤§ä¸ªæ•°
 * @param capacity å®¹é‡
 * @param KW æœ€ä½³ç»„åˆçŸ©é˜µ
 * @param weights é‡é‡
 * @param values ä»·å€¼
 */
const findMaxValue = (
  n: number,
  capacity: number,
  KW: number[][],
  weights: number[],
  values: number[]
) => {
  let i = n
  let w = capacity
  // å½“å‰©ä½™æ•°é‡å’Œå®¹é‡éƒ½å¤§äº0å°±æ‰§è¡Œå¾ªç¯
  while (i > 0 && w > 0) {
    // è¿™é‡Œçš„å«ä¹‰æ˜¯å‡è®¾å–äº†è¿™ä¸ªç‰©å“å’Œå°‘å–ä¸€æ¬¡è¿™ä¸ªç‰©å“çš„ä»·å€¼ç›¸åŒï¼Œé‚£å°±å¾€å‰æ‰¾å°‘å–ä¸€æ¬¡è¿™ä¸ªç‰©å“çš„ä½ç½®
    if (KW[i][w] !== KW[i - 1][w]) {
      console.log(`ç‰©å“ ${i} å¯ä»¥æ˜¯è§£çš„ä¸€éƒ¨åˆ† w,v: ${weights[i - 1]}, ${values[i - 1]};`)
      i--
      w = w - KW[i][w]
    } else {
      i-- // ç»§ç»­å¾€ä¸Šæ‰¾
    }
  }
}

/**
 *
 * @param weights ç‰©å“é‡é‡
 * @param values ç‰©å“çš„ä»·å€¼
 * @param capacity èƒŒåŒ…å®¹é‡
 * @param n ç‰©å“æ•°é‡
 * @returns number
 */
const knapSack = (weights: number[], values: number[], capacity: number, n: number) => {
  // åˆå§‹åŒ–æ‰€æœ‰å­æ–¹æ¡ˆçŸ©é˜µ
  const KW: number[][] = []

  for (let i = 0; i <= n; i++) {
    KW[i] = []
  }
  // iæ˜¯å°†è¦è£…çš„ç‰©å“æ•°é‡
  for (let i = 0; i <= n; i++) {
    // w å°†è¦è£…è¿›å»çš„ç‰©å“ä½“ç§¯
    for (let w = 0; w <= capacity; w++) {
      // å½“æ•°é‡ä¸º0 è¡¨ç¤ºä»€ä¹ˆéƒ½ä¸è£…ï¼Œå½“å®¹é‡ä¸º0ï¼Œè¡¨ç¤ºä»€ä¹ˆéƒ½è£…ä¸ä¸‹ï¼ŒçŸ©é˜µç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—ç»Ÿä¸€ä¸º0
      if (i == 0 || w == 0) {
        KW[i][w] = 0
        // æ­¤å¤„çš„å«ä¹‰æ˜¯è£…äº†wä¹‹å è¿˜å‰©ä¸‹çš„å®¹é‡çš„å¤„ç†æ–¹å¼
      } else if (weights[i - 1] <= w) {
        // ç‰©å“içš„é‡é‡å¿…é¡»å°äºçº¦æŸå®¹é‡
        // planA çš„å«ä¹‰æ˜¯ è£…äº†å½“å‰ç‰©å“çš„ä»·å€¼ + å‰i-1çš„æœ€ä½³ç»„åˆçš„ä»·å€¼ï¼Œ
        // [w - weights[i - 1]] å³å› ä¸ºå·²ç»è£…äº†w å‰©ä¸‹çš„å°±æ˜¯weights[i - 1]
        // æˆ–è€…è¯´æ˜¯ å®¹é‡ä¸ºw-weights[i-1]çš„æ—¶å€™çš„ä¸æ”¾ç‰©å“içš„ä»·å€¼
        const planA = values[i - 1] + KW[i - 1][w - weights[i - 1]] 
        // planB çš„å«ä¹‰æ˜¯ ä¸è£…å½“å‰ç‰©å“ ç›´æ¥å–å‰i-1çš„æœ€ä½³ç»„åˆ
        const planB = KW[i - 1][w] 
        KW[i][w] = planA > planB ? planA : planB
      } else {
        // å°è¯•è£…wï¼Œå®¹é‡ä¸å¤Ÿï¼Œå–å‰ä¸€ä¸ªæ–¹æ¡ˆi-1
        KW[i][w] = KW[i - 1][w]
      }
    }
  }

  // findMaxValue(n, capacity, KW, weights, values)
  // console.log(KW)
  console.log('æœ€ä½³ç»„åˆçš„æœ€å¤§ä»·å€¼ä¸º', KW[n][capacity])
  return KW[n][capacity]
}
```
#### å®ç°è¦ç‚¹
KW[i][w]çš„å«ä¹‰ï¼šä»ä¸‹æ ‡[0,i]çš„ç‰©å“é‡Œä»»æ„å–ï¼Œæ”¾è¿›å®¹é‡ä¸ºwçš„èƒŒåŒ…ï¼Œå…¶æœ€å¤§ä»·å€¼æ˜¯å¤šå°‘ã€‚

1. å¦‚æœè£…ä¸ä¸‹å½“å‰ç‰©å“ï¼Œé‚£ä¹ˆå‰nä¸ªç‰©å“çš„æœ€ä½³ç»„åˆå’Œå‰n-1ä¸ªç‰©å“çš„æœ€ä½³ç»„åˆæ˜¯ä¸€æ ·çš„
2. å¦‚æœè£…çš„ä¸‹å½“å‰ç‰©å“ï¼Œ
- å‡è®¾Aï¼šè£…å½“å‰ç‰©å“ï¼Œåœ¨ç»™å½“å‰ç‰©å“é¢„ç•™äº†ç›¸åº”ç©ºé—´çš„æƒ…å†µä¸‹ï¼Œå‰n-1ä¸ªç‰©å“çš„æœ€ä½³ç»„åˆåŠ ä¸Šå½“å‰ç‰©å“çš„ä»·å€¼å°±æ˜¯æ€»ä»·å€¼
- å‡è®¾Bï¼šä¸è£…å½“å‰ç‰©å“ï¼Œé‚£ä¹ˆå‰nä¸ªç‰©å“çš„æœ€ä½³ç»„åˆå’Œå‰n-1ä¸ªç‰©å“çš„æœ€ä½³ç»„åˆæ˜¯ä¸€æ ·çš„

é€‰å–å‡è®¾Aå’Œå‡è®¾Bä¸­è¾ƒå¤§çš„ä»·å€¼ï¼Œå°±æ˜¯å½“å‰æœ€ä½³ç»„åˆçš„ä»·å€¼
ä»è¡¨çš„æœ€å³ä¸‹è§’å¼€å§‹å›æº¯ï¼Œå¦‚æœå‘ç°å‰nä¸ªç‰©å“çš„æœ€ä½³ç»„åˆä»·å€¼å’Œå‰n-1ä¸ªç‰©å“çš„æœ€ä½³ç»„åˆçš„ä»·å€¼ä¸€æ ·ï¼Œè¯´æ˜ç¬¬nä¸ªç‰©å“æ²¡æœ‰è¢«è£…å…¥ï¼Œå¦åˆ™ç¬¬nä¸ªç‰©å“è¢«è£…å…¥ã€‚
![image.png](https://cdn.nlark.com/yuque/0/2023/png/1553840/1677166251026-26e629ea-30e9-473f-b937-44568e3847f2.png#averageHue=%23fbfcfc&clientId=u4fb16ff9-639b-4&from=paste&height=340&id=uc9ddbd42&name=image.png&originHeight=1050&originWidth=1854&originalType=binary&ratio=2&rotation=0&showTitle=false&size=465772&status=done&style=none&taskId=u8fc8997b-8521-457e-8cc6-3cc194d34df&title=&width=600)

### â­ï¸èƒŒåŒ…é—®é¢˜2
> åªé™åˆ¶èƒŒåŒ…æœ€å¤§ä¸ªæ•°ï¼Œè®¡ç®—æœ€å¤§ä»·å€¼

#### ä»£ç å®ç°
```typescript
function weightBagProblemNormal(weight, value, size) {
  // å®šä¹‰ dp æ•°ç»„
  const len = weight.length,
    dp = Array(len)
      .fill([])
      .map(() => Array(size + 1).fill(0))


  // åˆå§‹åŒ–
  for (let j = weight[0]; j <= size; j++) {
    dp[0][j] = value[0]
  }


  // weight æ•°ç»„çš„é•¿åº¦len å°±æ˜¯ç‰©å“ä¸ªæ•°
  for (let i = 1; i < len; i++) {
    // éå†ç‰©å“
    for (let j = 0; j <= size; j++) {
      // éå†èƒŒåŒ…å®¹é‡
      if (j < weight[i]) dp[i][j] = dp[i - 1][j]
      else dp[i][j] = Math.max(dp[i - 1][j], dp[i - 1][j - weight[i]] + value[i])
    }
  }


  console.table(dp)

  return dp[len - 1][size]
}
```
#### ![image.png](https://cdn.nlark.com/yuque/0/2023/png/1553840/1678957777566-72aec29e-9fd5-4ea1-8c07-aa9a1edc2579.png#averageHue=%23d0cfcc&clientId=ucfa155a2-c2eb-4&from=paste&height=268&id=sVu7P&name=image.png&originHeight=536&originWidth=1404&originalType=binary&ratio=2&rotation=0&showTitle=false&size=166470&status=done&style=none&taskId=u19deaa56-47c7-4ae5-926a-f6721ef9a7f&title=&width=702)
#### ä»£ç å®ç°
```javascript
/**
 * åªé™åˆ¶ä¸ªæ•°ç®—æœ€å¤§ä»·å€¼çš„01èƒŒåŒ…
 * @param weights é‡é‡
 * @param values ä»·å€¼
 * @param size ä¸ªæ•°
 * @returns
 */
function weightBagProblem(weights: number[], values: number[], size: number) {
  const len = weights.length,
    dp = Array(size + 1).fill(0)
  // ä»0å¼€å§‹
  for (let i = 0; i < len; i++) {
    for (let j = size; j >= weights[i]; j--) {  // æ³¨æ„è¦å€’åº
      // dp[j - weight[i]]è¡¨ç¤ºå®¹é‡ä¸ºj - weight[i]çš„èƒŒåŒ…æ‰€èƒŒçš„æœ€å¤§ä»·å€¼ã€‚
      dp[j] = Math.max(dp[j], dp[j - weights[i]] + values[i])
    }
  }
  return dp[size]
}
```
æ€è·¯åˆ†æ
dp[j]çš„å«ä¹‰æ˜¯ï¼šå®¹é‡ä¸ºä¸ºjçš„èƒŒåŒ…æ‰€èƒŒçš„æœ€å¤§ä»·å€¼
### â­ï¸æœ€é•¿é€’å¢å­åºåˆ—
> ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿**ä¸¥æ ¼é€’å¢å­åºåˆ—**çš„é•¿åº¦ã€‚
> å­åºåˆ—Â æ˜¯ç”±æ•°ç»„æ´¾ç”Ÿè€Œæ¥çš„åºåˆ—ï¼Œåˆ é™¤ï¼ˆæˆ–ä¸åˆ é™¤ï¼‰æ•°ç»„ä¸­çš„å…ƒç´ è€Œä¸æ”¹å˜å…¶ä½™å…ƒç´ çš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œ[3,6,2,7] æ˜¯æ•°ç»„ [0,3,1,6,2,2,7] çš„å­åºåˆ—ã€‚
> **ç¤ºä¾‹ 1ï¼š**
> è¾“å…¥ï¼šnums = [10,9,2,5,3,7,101,18] è¾“å‡ºï¼š4 è§£é‡Šï¼šæœ€é•¿é€’å¢å­åºåˆ—æ˜¯ [2,3,7,101]ï¼Œå› æ­¤é•¿åº¦ä¸º 4 ã€‚
> [https://leetcode.cn/problems/longest-increasing-subsequence/](https://leetcode.cn/problems/longest-increasing-subsequence/)

#### è¿”å›æ•°é‡
```javascript

/**
 * æœ€é•¿å­é€’å¢å­åºåˆ—é•¿åº¦
 * dp[i] è¡¨ç¤ºä»¥ nums[i] è¿™ä¸ªæ•°ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚
 * @param {number[]} nums
 * @return {number}
 */
const lengthOfLIS = (nums: number[]): number => {
  //  // dp æ•°ç»„çš„å®šä¹‰ï¼Œå®ƒè®°å½•çš„æ­£æ˜¯ä»¥æ¯ä¸ªå…ƒç´ ä¸ºæœ«å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚
  const dp = new Array(nums.length).fill(1)
  let res = 0
  for (let i = 0; i < nums.length; i++) {
    // j åºåˆ—å°±æ˜¯åœ¨æ±‚ nums ä»¥æ¯ä¸ªå…ƒç´ ä¸ºæœ«å°¾çš„æœ€é•¿å­åºåˆ—é•¿åº¦
    // å› æ­¤è¿™æ®µçš„å«ä¹‰æ˜¯ï¼šä½ç½®içš„æœ€é•¿å‡åºå­åºåˆ—ç­‰äºjä»0åˆ°i-1å„ä¸ªä½ç½®çš„æœ€é•¿å‡åºå­åºåˆ— + 1 çš„æœ€å¤§å€¼ã€‚
    for (let j = 0; j < i; j++) {
      // å¯»æ‰¾nums[0..j-1] ä¸­æ¯” nums[i] å°çš„å…ƒç´ 
      if (nums[i] > nums[j]) {
        console.log('num', nums[i], nums[j])
        // æŠŠ nums[i] ç®—ä¸Šï¼Œå³å¯å½¢æˆé•¿åº¦ä¸º dp[j] + 1ï¼Œä¸”ä»¥ nums[i] ä¸ºç»“å°¾çš„é€’å¢å­åºåˆ—
        dp[i] = Math.max(dp[i], dp[j] + 1)
        // æˆ– dp[i] = dp[i] > dp[j] + 1 ? dp[i] : dp[j] + 1
      }
    }
    if (dp[i] > res) {
      res = dp[i]
    }
  }

  return res
}
```
### â­ï¸æœ€é•¿è¿ç»­é€’å¢åºåˆ—
> ç»™å®šä¸€ä¸ªæœªç»æ’åºçš„æ•´æ•°æ•°ç»„ï¼Œæ‰¾åˆ°**æœ€é•¿ä¸” è¿ç»­é€’å¢çš„å­åºåˆ—ï¼Œå¹¶è¿”å›è¯¥åºåˆ—çš„é•¿åº¦ã€‚**
> è¿ç»­é€’å¢çš„å­åºåˆ— å¯ä»¥ç”±ä¸¤ä¸ªä¸‹æ ‡ l å’Œ rï¼ˆl < rï¼‰ç¡®å®šï¼Œå¦‚æœå¯¹äºæ¯ä¸ª l <= i < rï¼Œéƒ½æœ‰ nums[i] < nums[i + 1] ï¼Œé‚£ä¹ˆå­åºåˆ— [nums[l], nums[l + 1], ..., nums[r - 1], nums[r]] å°±æ˜¯è¿ç»­é€’å¢å­åºåˆ—ã€‚
> è¾“å…¥ï¼šnums = [1,3,5,4,7]
> è¾“å‡ºï¼š3
> è§£é‡Šï¼šæœ€é•¿è¿ç»­é€’å¢åºåˆ—æ˜¯ [1,3,5], é•¿åº¦ä¸º3ã€‚
> å°½ç®¡ [1,3,5,7] ä¹Ÿæ˜¯å‡åºçš„å­åºåˆ—, ä½†å®ƒä¸æ˜¯è¿ç»­çš„ï¼Œå› ä¸º 5 å’Œ 7 åœ¨åŸæ•°ç»„é‡Œè¢« 4 éš”å¼€ã€‚ 
> æ¥æºï¼š[https://leetcode.cn/problems/longest-continuous-increasing-subsequence](https://leetcode.cn/problems/longest-continuous-increasing-subsequence)

#### ä»£ç å®ç°
```javascript
function findLengthOfLCIS(nums: number[]): number {
  // Think for yourself for 5 minutes...
  // q1. è€ƒè™‘éœ€è¦è¿ç»­é€’å¢çš„å­åºåˆ—
  // q2. dp[i] è¡¨ç¤ºä»¥nums[i]ç»“å°¾çš„è¿ç»­é€’å¢å­åºåˆ—
  // dp[i] = dp[i-1]+1

  const n: number = nums.length
  const dp: number[] = Array(n).fill(1)

  let result: number = 0
  for (let i = 0; i < n; i++) {
    if (nums[i] > nums[i - 1]) {
      dp[i] = dp[i - 1] + 1
    }
    if (dp[i] > result) {
      result = dp[i]
    }
  }

  return result
}
```
### â­ï¸æœ€é•¿é‡å¤å­æ•°ç»„
> ç»™ä¸¤ä¸ªæ•´æ•°æ•°ç»„ nums1 å’Œ nums2 ï¼Œè¿”å› _ä¸¤ä¸ªæ•°ç»„ä¸­ **å…¬å…±çš„ ã€é•¿åº¦æœ€é•¿çš„å­æ•°ç»„çš„é•¿åº¦ **_ã€‚
> è¾“å…¥ï¼šnums1 = [1,2,3,2,1], nums2 = [3,2,1,4,7] è¾“å‡ºï¼š3 è§£é‡Šï¼šé•¿åº¦æœ€é•¿çš„å…¬å…±å­æ•°ç»„æ˜¯ [3,2,1] ã€‚
> æ¥æºï¼š[https://leetcode.cn/problems/maximum-length-of-repeated-subarray/](https://leetcode.cn/problems/maximum-length-of-repeated-subarray/)

#### ä»£ç å®ç°
```javascript
function findLength(nums1: number[], nums2: number[]): number {
  // Think for yourself for 5 minutes...
  // q1. å­æ•°ç»„=è¿ç»­å­åºåˆ—
  // ä»¥ä¸€ä¸ªæ•°ç»„ä¸ºåŸºå‡†ï¼Œä»å¦ä¸€ä¸ªæ•°ç»„å…ƒç´ ä¾æ¬¡ç¡®å®šA[i-1]å’ŒB[j-1]ä½ç½®çš„å€¼æ˜¯å¦ç›¸ç­‰
  // dp[i][j] ï¼šä»¥ä¸‹æ ‡i - 1ä¸ºç»“å°¾çš„Aï¼Œå’Œä»¥ä¸‹æ ‡j - 1ä¸ºç»“å°¾çš„Bï¼Œæœ€é•¿é‡å¤å­æ•°ç»„é•¿åº¦ä¸ºdp[i][j]ã€‚
  // å½“A[i-1]===B[j-1]çš„æ—¶å€™ï¼Œdp[i][j] = dp[i-1][j-1] + 1
  const dp: number[][] = Array.from(Array(m+1), () => Array(n+1).fill(0))
  
  let result: number = 0

  for (let i = 1; i <= nums1.length; i++) {
    for (let j = 1; j <= nums2.length; j++) {
      if (nums1[i - 1] === nums2[j - 1]) {
        dp[i][j] = dp[i - 1][j - 1] + 1
      }
      result = dp[i][j] > result ? dp[i][j] : result
    }
  }
  return result
}

/**
 * æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ç‰ˆ
 * @param nums1
 * @param nums2
 */
function findLength(nums1: number[], nums2: number[]): number {
  const dp: number[] = Array(nums2.length + 1).fill(0)

  let result: number = 0

  for (let i = 1; i <= nums1.length; i++) {
    for (let j = nums2.length; j > 0; j--) {
      if (nums1[i - 1] === nums2[j - 1]) {
        dp[j] = dp[j - 1] + 1
      } else {
        dp[j] = 0
      }
      result = dp[j] > result ? dp[j] : result
    }
  }
  return result
}
```
PSï¼šå¯¹äºä¸ºä»€ä¹ˆå®šä¹‰ä¸‹æ ‡ä¸ºi-1ç»“å°¾çš„è§£é‡Šï¼š
### â­ï¸æœ€é•¿å…¬å…±å­åºåˆ—LCS
> ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²Â text1 å’ŒÂ text2ï¼Œè¿”å›è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿ å…¬å…±å­åºåˆ— çš„é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ å…¬å…±å­åºåˆ— ï¼Œè¿”å› 0 ã€‚
> ä¸€ä¸ªå­—ç¬¦ä¸²çš„Â å­åºåˆ—Â æ˜¯æŒ‡è¿™æ ·ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼šå®ƒæ˜¯ç”±åŸå­—ç¬¦ä¸²åœ¨ä¸æ”¹å˜å­—ç¬¦çš„ç›¸å¯¹é¡ºåºçš„æƒ…å†µä¸‹åˆ é™¤æŸäº›å­—ç¬¦ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ä»»ä½•å­—ç¬¦ï¼‰åç»„æˆçš„æ–°å­—ç¬¦ä¸²ã€‚
> è¾“å…¥ï¼štext1 = "abcde", text2 = "ace"  è¾“å‡ºï¼š3   è§£é‡Šï¼šæœ€é•¿å…¬å…±å­åºåˆ—æ˜¯ "ace" ï¼Œå®ƒçš„é•¿åº¦ä¸º 3 ã€‚
> æ¥æºï¼š[https://leetcode.cn/problems/qJnOS7/](https://leetcode.cn/problems/qJnOS7/)

æœ€é•¿å…¬å…±å­åºåˆ—æ˜¯ä¸€ä¸ªååˆ†å®ç”¨çš„é—®é¢˜ï¼Œå®ƒå¯ä»¥æè¿°ä¸¤æ®µæ–‡å­—ä¹‹é—´çš„"ç›¸ä¼¼åº¦"ï¼Œå³å®ƒä»¬çš„é›·åŒç¨‹åº¦ï¼Œä»è€Œèƒ½å¤Ÿç”¨æ¥è¾¨åˆ«æŠ„è¢­ã€‚å¯¹ä¸€æ®µæ–‡å­—è¿›è¡Œä¿®æ”¹ä¹‹åï¼Œè®¡ç®—æ”¹åŠ¨å‰åæ–‡å­—çš„æœ€é•¿å…¬å…±å­åºåˆ—ï¼Œå°†é™¤æ­¤å­åºåˆ—å¤–çš„éƒ¨åˆ†æå–å‡ºæ¥ï¼Œè¿™ç§æ–¹æ³•åˆ¤æ–­ä¿®æ”¹çš„éƒ¨åˆ†ï¼Œå¾€å¾€ååˆ†å‡†ç¡®ã€‚  
PS:
#### è¿”å›æ•°é‡
```javascript
/**
 * æœ€é•¿å­åºåˆ—é•¿åº¦  
 * eg: 'abedcf', 'daecfa'
 * @param wordX å­—ç¬¦ä¸²x
 * @param wordY å­—ç¬¦ä¸²y
 * @returns number
 */
const longestCommonSubsequence = (wordX: string, wordY: string): number => {
  const m = wordX.length
  const n = wordY.length
  // åˆå§‹åŒ–dpçŸ©é˜µ
  const dp: number[][] = []
  for (let i = 0; i <= m; i++) {
    dp[i] = []
    for (let j = 0; j <= n; j++) {
      dp[i][j] = 0
    }
  }

  for (let i = 0; i <= m; i++) {
    for (let j = 0; j <= n; j++) {
      if (i === 0 || j === 0) {
        dp[i][j] = 0
        // å½“çºµæ¨ªä½ç½®å­—ç¬¦ç›¸åŒçš„è¯ï¼Œå½“å‰ä½ç½®çš„å€¼ç­‰äºå·¦ä¸Šæ–œè§’çš„å€¼+1
      } else if (wordX[i - 1] === wordY[j - 1]) {
        dp[i][j] = dp[i - 1][j - 1] + 1
      } else {
        // å¦åˆ™å°±æ¯”è¾ƒæ­£ä¸Šæ–¹å’Œæ­£å·¦ä¾§çš„å€¼ï¼Œå“ªä¸ªå¤§å°±å–å“ªä¸ª
        const topValue = dp[i - 1][j]
        const leftValue = dp[i][j - 1]
        dp[i][j] = topValue > leftValue ? topValue : leftValue
      }
    }
  }
  return dp[m][n]
}
```
#### è¿”å›åºåˆ—å€¼
```javascript
/**
 * è·å–å­åºåˆ—å€¼
 * @param solution åºåˆ—çŸ©é˜µ
 * @param wordX
 * @param m x è½´
 * @param n y è½´
 * @returns string
 */
const getSolution = (solution: string[][], wordX: string, m: number, n: number): string => {
  let xAxis = m // æ¨ªå‘
  let yAxis = n // çºµå‘
  let x = solution[yAxis][xAxis]  // æœ€å³ä¸‹è§’
  let result = ''
  while (x !== '-') {
    if (solution[yAxis][xAxis] === 'diagonal') {
      result = wordX[yAxis - 1] + result
      yAxis--
      xAxis--
    } else if (solution[yAxis][xAxis] === 'left') {
      xAxis--
    } else if (solution[yAxis][xAxis] === 'top') {
      yAxis--
    }
    x = solution[yAxis][xAxis]
  }

  return result
}

/**
 * æœ€é•¿å­åºåˆ—å€¼
 * eg: 'abedcf', 'daecfa'
 * @param wordX å­—ç¬¦ä¸²x
 * @param wordY å­—ç¬¦ä¸²y
 * @returns string
 */
const longestCommonSubsequencePlan = (wordX: string, wordY: string): string => {
  const m = wordX.length
  const n = wordY.length
  // åˆå§‹åŒ–dpçŸ©é˜µ
  const dp: number[][] = []
  const solution: string[][] = []
  for (let i = 0; i <= m; i++) {
    dp[i] = []
    solution[i] = []
    for (let j = 0; j <= n; j++) {
      dp[i][j] = 0
      solution[i][j] = ''
    }
  }

  for (let i = 0; i <= m; i++) {
    for (let j = 0; j <= n; j++) {
      if (i === 0 || j === 0) {
        dp[i][j] = 0
        solution[i][j] = '-'
        // å½“çºµæ¨ªä½ç½®å­—ç¬¦ç›¸åŒçš„è¯ï¼Œå½“å‰ä½ç½®çš„å€¼ç­‰äºå·¦ä¸Šæ–œè§’çš„å€¼+1
      } else if (wordX[i - 1] === wordY[j - 1]) {
        dp[i][j] = dp[i - 1][j - 1] + 1
        solution[i][j] = 'diagonal'
      } else {
        // å¦åˆ™å°±æ¯”è¾ƒæ­£ä¸Šæ–¹å’Œæ­£å·¦ä¾§çš„å€¼ï¼Œå“ªä¸ªå¤§å°±å–å“ªä¸ª
        const topValue = dp[i - 1][j]
        const leftValue = dp[i][j - 1]
        dp[i][j] = topValue > leftValue ? topValue : leftValue
        solution[i][j] = topValue > leftValue ? 'top' : 'left'
      }
    }
  }
  // å› ä¸ºä¸Šé¢æ˜¯ wordXä½œä¸ºå¤–å±‚forå¾ªç¯ï¼Œå› æ­¤wordXæ˜¯åœ¨yè½´
  return getSolution(solution, wordX, m, n)
}

```
#### ç®€æ´ç‰ˆ
```typescript
function longestCommonSubsequence(text1: string, text2: string): number {
  // Think for yourself for 5 minutes...
  // q1. å­åºåˆ—ï¼Œä¸éœ€è¦è¿ç»­çš„
  // q2. dp[i][j]ï¼šé•¿åº¦ä¸º[0, i - 1]çš„å­—ç¬¦ä¸²text1ä¸é•¿åº¦ä¸º[0, j - 1]çš„å­—ç¬¦ä¸²text2çš„æœ€é•¿å…¬å…±å­åºåˆ—ä¸ºdp[i][j]
  // å¯¹äºdp[i][j] åœ¨å¯¹æ¯”è¿‡ç¨‹ä¸­å­˜åœ¨ text1[i-1]å’Œtext2[j-1] ï¼Œå­˜åœ¨ä¸¤ç§æƒ…å†µ
  // a. ç›¸åŒ dp[i][j] = dp[i-1][j-1]+1
  // b. ä¸åŒ å°±å–text1[0,i-2]å’Œtext2[0,j-1] æˆ–text1[0,i-1]å’Œtext2[0,j-2]çš„æœ€é•¿å­åºåˆ—ï¼Œå³max(dp[i-1][j],dp[i][j-1])
  // dp[0][i] ä¸º0  dp[j][0] ä¸º0

  const [m, n] = [text1.length, text2.length]

  const dp: number[][] = Array.from(Array(m+1), () => Array(n+1).fill(0))


  for (let i = 1; i <= m; i++) {
    for (let j = 1; j <= n; j++) {
      if (text1[i - 1] === text2[j - 1]) {
        dp[i][j] = dp[i - 1][j - 1] + 1
      } else {
        dp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1])
      }
    }
  }

  return dp[m][n]
}
```
#### å®ç°æ€è·¯
å…ˆç”¨å½’çº³æ³•åˆ—å‡ºçŸ©é˜µæ ‡è¯†åºåˆ—çŸ©é˜µçš„ç‰¹å¾
ç‰¹å¾1ï¼š**dp[0][j]æˆ–dp[j][0]  éƒ½ä¸º0**
ç‰¹å¾2ï¼š**dp[i][j] = dp[i - 1][j - 1] + 1**   å½“åæ ‡æ‰€å¤„ä½ç½®ä¸¤ä¸ªå­—ç¬¦ä¸²çš„å­—ç¬¦ä¸€è‡´ï¼Œé‚£ä¹ˆé•¿åº¦ä¸ºå·¦ä¸Šè§’çš„å€¼+1
ç‰¹å¾3ï¼šå½“ä¸å­˜åœ¨ä»¥ä¸Šæƒ…å†µï¼Œé‚£ä¹ˆå½“å‰åæ ‡ä½ç½®çš„å€¼å°±å–å·¦ä¾§å’Œä¸Šä¾§ä¸­è¾ƒå¤§çš„é‚£ä¸€ä¸ª **dp[i][j] = dp[i-1][j] / dp[i][j-1]**

åœ¨å¯»æ‰¾å…·ä½“å­åºåˆ—å€¼çš„ä¹‹åï¼Œä»¥ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºåŸºå‡†ï¼Œä»¥åºåˆ—çŸ©é˜µçš„æ ‡è¯†ä¸ºä¾æ®ï¼Œä»æœ€å³ä¸‹è§’å¼€å§‹æ‰¾ï¼Œå½“é‡åˆ°â€˜diagonalâ€™æ—¶ï¼Œè¯´æ˜åºåˆ—çŸ©é˜µæ¨ªçºµä½ç½®å‡ºç°ç›¸åŒçš„å­—ç¬¦ï¼Œè®°ä¸‹æ¥ï¼Œå½“é‡åˆ°â€˜topâ€™æˆ–â€˜leftâ€™æ—¶ï¼Œå¾€å®ƒä»¬æ›´å°çš„æ–¹å‘å»æ‰¾ï¼Œå³å¯æ±‚å¾—æœ€åçš„ç»“æœã€‚
![image.png](https://cdn.nlark.com/yuque/0/2023/png/1553840/1677311552391-194bb323-5cb7-489e-abdd-1d59e64ae537.png#averageHue=%23fbfafa&clientId=u2db308b2-e67b-4&from=paste&height=704&id=u94aa6587&name=image.png&originHeight=1408&originWidth=2528&originalType=binary&ratio=2&rotation=0&showTitle=false&size=307615&status=done&style=none&taskId=u17ec9879-4219-477f-9f00-df31f1ffd7e&title=&width=1264) 
### â­ï¸åˆ¤æ–­å­åºåˆ—
> ç»™å®šå­—ç¬¦ä¸² s å’Œ t ï¼Œåˆ¤æ–­ s æ˜¯å¦ä¸º t çš„å­åºåˆ—
> å­—ç¬¦ä¸²çš„ä¸€ä¸ªå­åºåˆ—æ˜¯åŸå§‹å­—ç¬¦ä¸²åˆ é™¤ä¸€äº›ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ï¼‰å­—ç¬¦è€Œä¸æ”¹å˜å‰©ä½™å­—ç¬¦ç›¸å¯¹ä½ç½®å½¢æˆçš„æ–°å­—ç¬¦ä¸²ã€‚ï¼ˆä¾‹å¦‚ï¼Œ"ace"æ˜¯"abcde"çš„ä¸€ä¸ªå­åºåˆ—ï¼Œè€Œ"aec"ä¸æ˜¯ï¼‰ã€‚
> è¾“å…¥ï¼šs = "abc", t = "ahbgdc" è¾“å‡ºï¼štrue
> æ¥æºï¼š[https://leetcode.cn/problems/is-subsequence](https://leetcode.cn/problems/is-subsequence)

#### ä»£ç å®ç°
```javascript
function isSubsequence(s: string, t: string): boolean {
  // Think for yourself for 5 minutes...
  // q1. sä¸ºtçš„å­åºåˆ—ï¼Œsé•¿åº¦ä¸€å®š<=tçš„é•¿åº¦
  // q2. ä¸€å®šæ»¡è¶³så’Œtçš„å…¬å…±å­åºåˆ—é•¿åº¦ä¸ºsçš„é•¿åº¦
  // å½“ i-1 == j-1çš„å­—ç¬¦æ—¶æ›´æ–°å€¼
  // å½“ä¸ç­‰äºæ—¶ téœ€è¦åˆ å‡å…ƒç´ äº†

  const [m, n] = [s.length, t.length]

  const dp: number[][] = Array.from(Array(m + 1), () => Array(n + 1).fill(0))
  for (let i = 1; i <= m; i++) {
    for (let j = 1; j <= n; j++) {
      if (s[i - 1] === t[j - 1]) {
        dp[i][j] = dp[i - 1][j - 1] + 1
      } else {
        // è¿™é‡Œå› ä¸ºä¸LCSä¸åŒçš„ç‚¹å°±æ˜¯ LCSæ˜¯æ¯”è¾ƒdp[i - 1][j], dp[i][j - 1]ï¼Œ
        // ä½†æ­¤é¢˜éœ€è¦çš„æ˜¯ä»é•¿çš„tä¸­æ‰¾sï¼Œå› æ­¤å½“é‡åˆ°ä¸åŒæ—¶åªèƒ½ç§»åŠ¨t[j]è€Œä¸èƒ½ç§»åŠ¨s[i],ç›¸å½“äºæ˜¯è®©s[i-1]å†å»å’Œt[j-2]åšæ¯”è¾ƒ
        dp[i][j] = dp[i][j - 1]
      }
    }
  }

  return dp[m][n] === m
}
```
### ä¸åŒçš„å­åºåˆ—
> ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªå­—ç¬¦ä¸² t ï¼Œè®¡ç®—åœ¨ s çš„å­åºåˆ—ä¸­ t å‡ºç°çš„ä¸ªæ•°ã€‚
> å­—ç¬¦ä¸²çš„ä¸€ä¸ª å­åºåˆ— æ˜¯æŒ‡ï¼Œé€šè¿‡åˆ é™¤ä¸€äº›ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ï¼‰å­—ç¬¦ä¸”ä¸å¹²æ‰°å‰©ä½™å­—ç¬¦ç›¸å¯¹ä½ç½®æ‰€ç»„æˆçš„æ–°å­—ç¬¦ä¸²ã€‚ï¼ˆä¾‹å¦‚ï¼Œ"ACE"Â æ˜¯Â "ABCDE"Â çš„ä¸€ä¸ªå­åºåˆ—ï¼Œè€ŒÂ "AEC"Â ä¸æ˜¯ï¼‰
> é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆç¬¦åˆ 32 ä½å¸¦ç¬¦å·æ•´æ•°èŒƒå›´ã€‚
> è¾“å…¥ï¼šs = "rabbbit", t = "rabbit" è¾“å‡ºï¼š3
> è§£é‡Šï¼š
> å¦‚ä¸‹å›¾æ‰€ç¤º, æœ‰ 3 ç§å¯ä»¥ä» s ä¸­å¾—åˆ° "rabbit" çš„æ–¹æ¡ˆã€‚
> rabbbit
> rabbbit
> rabbbit
> æ¥æºï¼š[https://leetcode.cn/problems/distinct-subsequences](https://leetcode.cn/problems/distinct-subsequences)

#### ä»£ç å®ç°
```javascript
function numDistinct(s: string, t: string): number {
  // Think for yourself for 5 minutes...
  // dp[i][j]ï¼šä»¥i-1ä¸ºç»“å°¾çš„så­åºåˆ—ä¸­å‡ºç°ä»¥j-1ä¸ºç»“å°¾çš„tçš„ä¸ªæ•°
  // s[i-1] ==t[i-1] æ—¶ åˆ†ä¸¤ç§æƒ…å†µ a. ç”¨s[i-1]åŒ¹é…ï¼Œé‚£ä¹ˆdp[i-1][j-1] b. ä¸ç”¨s[i-1]åŒ¹é…ï¼Œdp[i-1][j]
  // ä¾‹å¦‚ sï¼šbagg å’Œ tï¼šbag å¯¹äºs[2]å’Œs[3]æ˜¯ç›¸åŒçš„ï¼Œå¯ä»¥é€‰æ‹©ç”¨æˆ–ä¸ç”¨[2],[3] å› ä¸ºä»–ä»¬å„è‡ªä¼šæ„æˆä¸€ä¸ªç»“æœ
  // s[i-1]!=t[i-1] æ—¶ï¼Œdp[i-1][j]
  // dp[i][0] è¡¨ç¤º sä¸­ä»»æ„i-1ç»“å°¾çš„ä½ç½®åˆ é™¤å…ƒç´ ï¼Œå‡ºç°ç©ºå­—ç¬¦ä¸²çš„ä¸ªæ•°ï¼Œå…¨æ˜¯ 1
  // dp[0][j] è¡¨ç¤º ç©ºå­—ç¬¦ä¸²éšæ„åˆ é™¤å…ƒç´ ï¼Œå‡ºç°tä¸­jç»“å°¾çš„å­—ç¬¦ä¸²ä¸ªæ•°ï¼Œå…¨æ˜¯0

  const [m, n] = [s.length, t.length]

  const dp: number[][] = Array.from(Array(m + 1), () => Array(n + 1).fill(0))

  for (let i = 0; i <= m; i++) dp[i][0] = 1
  for (let j = 1; j <= n; j++) dp[0][1] = 0 // å¯ä»¥çœç•¥

  for (let i = 1; i <= m; i++) {
    for (let j = 1; j <= n; j++) {
      if (s[i - 1] == t[j - 1]) {
        dp[i][j] = dp[i - 1][j - 1] + dp[i - 1][j]
      } else {
        dp[i][j] = dp[i - 1][j]
      }
    }
  }

  return dp[m][n]
}
```
### ![image.png](https://cdn.nlark.com/yuque/0/2023/png/1553840/1679145322207-791dafcc-e548-4f08-b888-6262d68e6e03.png#averageHue=%23f2f2f2&clientId=u86e15571-2fbc-4&from=paste&height=607&id=uef41019e&name=image.png&originHeight=1194&originWidth=1180&originalType=binary&ratio=1&rotation=0&showTitle=false&size=212092&status=done&style=none&taskId=u1df4afe2-d99b-4e12-8217-6ff1c728b83&title=&width=600)
### ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ
> ç»™å®šä¸¤ä¸ªå•è¯ word1 å’Œ word2 ï¼Œè¿”å›ä½¿å¾— word1 å’Œ  word2_ _**ç›¸åŒ**æ‰€éœ€çš„**æœ€å°æ­¥æ•°**ã€‚
> **æ¯æ­¥ **å¯ä»¥åˆ é™¤ä»»æ„ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªå­—ç¬¦ã€‚
> è¾“å…¥: word1 = "sea", word2 = "eat"  è¾“å‡º: 2
> è§£é‡Š: ç¬¬ä¸€æ­¥å°† "sea" å˜ä¸º "ea" ï¼Œç¬¬äºŒæ­¥å°† "eat "å˜ä¸º "ea"
> æ¥æºï¼š[https://leetcode.cn/problems/delete-operation-for-two-strings](https://leetcode.cn/problems/delete-operation-for-two-strings)

#### ä»£ç å®ç°
```typescript
function minDistance(word1: string, word2: string): number {
  // Think for yourself for 5 minutes...
  // q1. è€ƒè™‘è¦ä½¿ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰æ¯æ¬¡å¯ä»¥åˆ æ‰ä¸€ä¸ªæ•°æ®
  // q2 dp[i][j]çš„å«ä¹‰æ˜¯ ä»¥i-1ç»“å°¾çš„word1ï¼Œå’Œä»¥j-1ç»“å°¾çš„word2ï¼Œè¦è¾¾åˆ°ç›¸ç­‰éœ€è¦åˆ é™¤çš„æœ€å°‘æ¬¡æ•°
  // å½“word1[i-1] å’Œ word2[j-1] ç›¸ç­‰çš„æ—¶å€™ dp[i][j] = dp[i-1][j-1]
  // å½“word1[i-1] å’Œ word2[j-1]ä¸æƒ³ç­‰çš„æ—¶å€™ åˆ†ä¸‰ç§åˆ é™¤æ–¹å¼,å–æœ€å°å€¼
  // a. åˆ é™¤word1[i-1]  -> dp[i-1][j]+1
  // b. åˆ é™¤word2[j-1] -> dp[i][j-1]+1
  // c. ä¸¤ä¸ªéƒ½åˆ é™¤ -> dp[i-1][j-1] + 2 å› ä¸º dp[i][j - 1] + 1 = dp[i - 1][j - 1] + 2 å› æ­¤è¿™ç§å¯ä»¥å»é™¤

  const [m, n] = [word1.length, word2.length]

  const dp: number[][] = Array.from(Array(m + 1), () => Array(n + 1).fill(0))

  for (let i = 0; i <= m; i++) dp[i][0] = i // è¦ä½¿ä»¥i-1ç»“å°¾çš„word1å’Œç©ºå­—ç¬¦ä¸²åŒ¹é…ï¼Œéœ€è¦åˆ é™¤iä¸ªå­—ç¬¦
  for (let j = 0; j <= n; j++) dp[0][j] = j // è¦ä½¿ç©ºå­—ä¸²å’Œj-1ç»“å°¾çš„word2åŒ¹é…ï¼Œéœ€è¦åˆ é™¤jä¸ªå­—ç¬¦

  for (let i = 1; i <= m; i++) {
    for (let j = 1; j <= n; j++) {
      if (word1[i - 1] === word2[j - 1]) {
        dp[i][j] = dp[i - 1][j - 1]
      } else {
        dp[i][j] = Math.min(dp[i - 1][j] + 1, dp[i][j - 1] + 1)
      }
    }
  }

  return dp[m][n]
}
```
### â­ï¸å›æ–‡å­ä¸² 
> ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²ä¸­ **å›æ–‡å­ä¸²** çš„æ•°ç›®ã€‚
> è¾“å…¥ï¼šs = "abc" è¾“å‡ºï¼š3 è§£é‡Šï¼šä¸‰ä¸ªå›æ–‡å­ä¸²: "a", "b", "c"
> è¾“å…¥ï¼šs = "aaa" è¾“å‡ºï¼š6 è§£é‡Šï¼š6ä¸ªå›æ–‡å­ä¸²: "a", "a", "a", "aa", "aa", "aaa" 
æ¥æºï¼š[https://leetcode.cn/problems/palindromic-substrings/](https://leetcode.cn/problems/palindromic-substrings/)

#### ä»£ç å®ç°
```javascript

function countSubstrings(s: string): number {
  // Think for yourself for 5 minutes...
  // dp[i][j] è¡¨ç¤ºåŒºé—´[i,j]èŒƒå›´å†…çš„å­—ç¬¦æ˜¯å¦èƒ½æ„æˆå›æ–‡å­—ç¬¦ä¸² boolean
  // å½“s[i]ä¸s[j]ç›¸ç­‰æ—¶ï¼Œåˆ†ä¸‰ç§æƒ…å†µ
  // a. i=j [a] è¿™ç§
  // b. iå’Œjç›¸å·®ä¸º1 [a,a]
  // c. iå’Œjç›¸å·®å¤§äº1 [c,a,b,a,c] å°±ç¼©å°åŒºé—´ s[i+1]å’Œs[j-1]æ˜¯å¦ç›¸ç­‰
  // éå†é¡ºåºçš„ç¡®å®šï¼Œå¦‚æœæŒ‰ç…§ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³ï¼Œè€ƒè™‘å¯¹äºæƒ…å†µcè€Œè¨€ dp[i][j] = s[i+1]å’Œs[j-1] .. æ­¤æ—¶è¦æ±‚çš„ç»“æœåœ¨å½“å‰ä½ç½®çš„å·¦ä¸‹æ–¹
  // æ˜¾ç„¶éœ€è¦é‡‡ç”¨ä»ä¸‹å¾€ä¸Šï¼Œä»å·¦å¾€å³çš„é¡ºåºéå†æ‰å¯ä»¥
  const n: number = s.length

  const dp: boolean[][] = Array.from(Array(n), () => Array(n).fill(false))

  let result: number = 0

  for (let i = n - 1; i >= 0; i--) {
    for (let j = i; j < n; j++) {
      // if (s[i] == s[j]) {
      //   // a b
      //   if (j - i <= 1) {
      //     dp[i][j] = true
      //     result++
      //   } else if (dp[i + 1][j - 1]) {
      //     // c
      //     result++
      //     dp[i][j] = true
      //   }
      // }

      // ç®€åŒ–
      if ((j - i <= 1 || dp[i + 1][j - 1]) && s[i] == s[j]) {
        result++
        dp[i][j] = true
      }
    }
  }

  return result
}
```
### â­ï¸æœ€é•¿å›æ–‡å­åºåˆ—
> ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€é•¿çš„å›æ–‡å­åºåˆ—ï¼Œå¹¶è¿”å›è¯¥åºåˆ—çš„é•¿åº¦
> å­åºåˆ—å®šä¹‰ä¸ºï¼šä¸æ”¹å˜å‰©ä½™å­—ç¬¦é¡ºåºçš„æƒ…å†µä¸‹ï¼Œåˆ é™¤æŸäº›å­—ç¬¦æˆ–è€…ä¸åˆ é™¤ä»»ä½•å­—ç¬¦å½¢æˆçš„ä¸€ä¸ªåºåˆ—ã€‚
> è¾“å…¥ï¼šs = "bbbab" è¾“å‡ºï¼š4 è§£é‡Šï¼šä¸€ä¸ªå¯èƒ½çš„æœ€é•¿å›æ–‡å­åºåˆ—ä¸º "bbbb" ã€‚ 
> æ¥æºï¼š[https://leetcode.cn/problems/longest-palindromic-subsequence](https://leetcode.cn/problems/longest-palindromic-subsequence)

#### ä»£ç å®ç°
```javascript

function longestPalindromeSubseq(s: string): number {
  // Think for yourself for 5 minutes...
  // dp[i][j] è¡¨ç¤º[i,j]åŒºé—´æœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦
  // å¦‚æœs[i]ç­‰äºs[j]  é‚£ä¹ˆdp[i][j] = dp[i+1][j-1] + 2
  // å¦‚æœä¸ç›¸ç­‰ a. åŠ å…¥s[i]çš„å›æ–‡å­åºåˆ—é•¿åº¦ dp[i+1][j] b. åŠ å…¥s[j]çš„å›æ–‡å­åºåˆ—é•¿åº¦ d[i][j-1]
  // éå†é¡ºåºæ˜¯ ä»ä¸‹å¾€ä¸Šï¼Œä»å·¦åˆ°å³ï¼Œå› æ­¤å³ä¸Šè§’æ‰æ˜¯ç­”æ¡ˆ
  // æœ‰é€’æ¨å…¬å¼ dp[i][j] = dp[i+1][j-1] + 2 å¯çŸ¥ï¼Œ[i][j]ä½ç½®æ˜¯æœ‰èµ–äº[i-1]å’Œ[j-1]çš„ï¼Œå› æ­¤éå†éœ€ç¡®ä¿ä¸¤è€…>=0
  // å› æ­¤å†…å±‚jä»i+1å¼€å§‹

  const n: number = s.length
  const dp: number[][] = Array.from(Array(n), () => Array(n).fill(0))

  // å½“i==jæ—¶ s[i]===s[j] ç­‰äº1 ï¼Œå¯¹åº”çŸ©é˜µæ–œè§’çº¿
  for (let i = 0; i < n; i++) dp[i][i] = 1

  for (let i = n - 1; i >= 0; i--) {
    for (let j = i + 1; j < n; j++) {
      if (s[i] === s[j]) {
        dp[i][j] = dp[i + 1][j - 1] + 2
      } else {
        dp[i][j] = Math.max(dp[i + 1][j], dp[i][j - 1])
      }
    }
  }

  return dp[0][n - 1]
}
```
### ![image.png](https://cdn.nlark.com/yuque/0/2023/png/1553840/1679204002760-e099f05e-7977-45ce-b7d3-0cf33b37e85b.png#averageHue=%23f2f2f2&clientId=u5e0a65b7-c99a-4&from=paste&height=470&id=u104d6f98&name=image.png&originHeight=884&originWidth=1128&originalType=binary&ratio=2&rotation=0&showTitle=false&size=173457&status=done&style=none&taskId=u9add5545-b13e-469c-b455-003cf2b555a&title=&width=600)
### æœ€é•¿å›æ–‡å­ä¸²
[ç®—æ³•:å­—ç¬¦ä¸²](https://www.yuque.com/vannvan/tools/qol7oyuzgic6thgi?view=doc_embed&inner=BtZkh)
### çŸ©é˜µé“¾ç›¸ä¹˜
#### æ¨å¯¼è¿‡ç¨‹
##### çŸ©é˜µæ‰«ç›²
ä¸€ä¸ªp*qçš„çŸ©é˜µAå’Œä¸€ä¸ªq*rçš„çŸ©é˜µBçš„ä¹˜ç§¯æ˜¯ä¸€ä¸ªæ–°çš„p*rçš„çŸ©é˜µCï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼šå…¶ä¸­1<=i<=på¹¶ä¸”1<=j<=rã€‚
ps:(æ‰«ç›²->åªæœ‰åœ¨ç¬¬ä¸€ä¸ªçŸ©é˜µçš„åˆ—æ•°ï¼ˆcolumnï¼‰å’Œç¬¬äºŒä¸ªçŸ©é˜µçš„è¡Œæ•°ï¼ˆrowï¼‰ç›¸åŒæ—¶æ‰æœ‰æ„ä¹‰)ã€‚
å®šä¹‰ï¼š
![image.png](https://cdn.nlark.com/yuque/0/2023/png/1553840/1677300286762-0d1d1fdf-d5ff-4f36-a507-e9fe3fc64946.png#averageHue=%23f9f9f9&clientId=u2db308b2-e67b-4&from=paste&height=405&id=u61d263d0&name=image.png&originHeight=810&originWidth=1632&originalType=binary&ratio=2&rotation=0&showTitle=false&size=120236&status=done&style=none&taskId=u687b2704-698f-4203-bb75-4b0c4684205&title=&width=816)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/1553840/1677294034544-aa95af5c-ddc7-4890-836a-62567e698915.png#averageHue=%23fef4f4&clientId=u2db308b2-e67b-4&from=paste&height=160&id=udfaf279f&name=image.png&originHeight=384&originWidth=1436&originalType=binary&ratio=2&rotation=0&showTitle=false&size=111441&status=done&style=none&taskId=u62e2ccb2-c79c-44c9-87d5-99eb0a31096&title=&width=600)
ç¤ºä¾‹ï¼š

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1553840/1677296029551-61148a51-dc3c-419d-bacc-2de0e38cab74.png#averageHue=%23fbfbfb&clientId=u2db308b2-e67b-4&from=paste&height=228&id=u3b42d3e5&name=image.png&originHeight=776&originWidth=2038&originalType=binary&ratio=2&rotation=0&showTitle=false&size=74169&status=done&style=none&taskId=ucc030a10-7881-47d1-9340-2bb1981d13e&title=&width=600)
A(3*3)å’ŒB(2*3)å¾—åˆ°è§„æ¨¡ä¸º2*3çš„çŸ©é˜µC
##### çŸ©é˜µé“¾
å¯¹äºAi..jçš„ä»»ä½•ä¸€ä¸ªè®¡ç®—é¡ºåºï¼Œæˆ‘ä»¬éƒ½å¯ä»¥æŠŠå®ƒæ‹†åˆ†æˆä¸‹é¢ä¸¤ä¸ªè®¡ç®—æ­¥éª¤
step1: Ai...j  = Ai...kAk + 1...j   (ä¸¾ä¾‹:å¯¹äºA1,A2,A3çŸ©é˜µæ¥è¯´ï¼Œå¯ä»¥ä¸º(A1A2)A3æˆ–A1(A2A3)ä¸¤ç§è®¡ç®—æ–¹å¼ï¼Œkçš„ä½ç½®å°±æ˜¯æ‹¬å·çš„ä½ç½® )
æ­¤æ—¶çš„å…³é”®ç‚¹å°±æ˜¯è¿™ä¸ªkçš„å€¼ï¼Œå³åº”è¯¥åœ¨å“ªä¸€ä¸ªåœ°æ–¹åˆ©ç”¨â€œæ‹¬å·â€æŠŠåºåˆ—åˆ’åˆ†æˆä¸¤ä¸ªå­åºåˆ—ã€‚
step2: å¦‚æœAi...k å’ŒAk+1...j  éƒ½æ˜¯ä½¿ç”¨æœ€ä¼˜åºåˆ—è®¡ç®—çš„ï¼Œé‚£ä¹ˆå­˜åœ¨m[i,j]å³Ai...jçš„æœ€å°‘ä¹˜ç§¯è®¡ç®—æ¬¡æ•°ä¸ºï¼š
![image.png](https://cdn.nlark.com/yuque/0/2023/png/1553840/1677303458667-1313e4c1-e83e-40a4-a63f-aa976be2cac4.png#averageHue=%23f4f4f4&clientId=u2db308b2-e67b-4&from=paste&height=109&id=uf9f127c6&name=image.png&originHeight=434&originWidth=2390&originalType=binary&ratio=2&rotation=0&showTitle=false&size=102903&status=done&style=none&taskId=u611e7966-85b6-4ddd-8aa8-11233e87ba4&title=&width=600)

ä»¥ä¸Šå…¬å¼çš„å«ä¹‰æ˜¯ï¼Œæ ¹æ®æˆ‘ä»¬å‰é¢çš„å®šä¹‰ï¼ŒAi...kçš„ä¹˜ç§¯ç»“æœä¸ºä¸€ä¸ªè§„æ¨¡ä¸ºPi-1*Pkçš„çŸ©é˜µï¼Œè€ŒAk+1....Ajçš„ä¹˜ç§¯ç»“æœä¸ºä¸€ä¸ªè§„æ¨¡ä¸ºPk*Pjçš„çŸ©é˜µï¼Œæ‰€ä»¥ï¼Œæ±‚Ai...jçš„æœ€å°‘ä¹˜ç§¯æ¬¡æ•°åˆ™ä¸ºã€Ai...kæ‰€éœ€è¦çš„æœ€å°‘ä¹˜ç§¯æ¬¡æ•°ã€‘+ã€Ai+1...jæ‰€éœ€è¦çš„æœ€å°‘ä¹˜ç§¯æ¬¡æ•°ã€‘+ã€ä¸­é—´ç”Ÿæˆçš„ä¸¤ä¸ªä¸´æ—¶çŸ©é˜µæ‰€éœ€è¦çš„ä¹˜ç§¯æ¬¡æ•°ã€‘ã€‚

é€’æ¨å…¬å¼
![image.png](https://cdn.nlark.com/yuque/0/2023/png/1553840/1677303547346-de5c94af-7a14-47dc-8caa-e763cb0faef5.png#averageHue=%23f6f6f6&clientId=u2db308b2-e67b-4&from=paste&height=77&id=u31b0793b&name=image.png&originHeight=308&originWidth=2414&originalType=binary&ratio=2&rotation=0&showTitle=false&size=88449&status=done&style=none&taskId=ufc24db09-eb23-4e9b-ad09-0167c044f99&title=&width=600)

ä¸€ä¸ªæ¯”è¾ƒå¥½ç†è§£çš„è®¡ç®—è¿‡ç¨‹å›¾
![image.png](https://cdn.nlark.com/yuque/0/2023/png/1553840/1677303672164-509b7a35-af93-47f9-9088-586448e13d20.png#averageHue=%23cfdece&clientId=u2db308b2-e67b-4&from=paste&height=258&id=ue7b40dc3&name=image.png&originHeight=1072&originWidth=2492&originalType=binary&ratio=2&rotation=0&showTitle=false&size=700157&status=done&style=none&taskId=u8beb3004-b5e1-4279-86c3-e7633f1365f&title=&width=600)
æ¬¡åº
1,2 -> 2,3 -> 3,4 -> 4,5 -> 5,6
1,3 -> 2,4 -> 3,5 -> 4,6
1,4 -> 2,5 -> 3,6
1,5 -> 2,6
1,6
#### 
ä»£ç å®ç°
##### è¿”å›æ•°é‡
```javascript

const minMatrixChainMultiTimes = (p: number[]): number => {
  const { length } = p
  // æœ€ä¼˜æ¬¡æ•°äºŒç»´çŸ©é˜µ
  const m: number[][] = []

  const s: number[][] = []

  // å¯¹è§’çº¿å¡«å……ä¸º0
  for (let i = 1; i <= length; i++) {
    m[i] = []
    m[i][i] = 0
  }

  for (let i = 0; i <= length; i++) {
    s[i] = []
    for (let j = 0; j <= length; j++) {
      s[i][j] = 0
    }
  }

  for (let x = 2; x <= length; x++) {
    // ä»dp[1][2] å¼€å§‹ç®—,å› ä¸ºåªç”¨ç®—å¯¹è§’çº¿å³ä¸Šæ–¹çš„ï¼Œå› æ­¤length - x + 1
    for (let i = 1; i <= length - x + 1; i++) {
      const j = i + x - 1
      m[i][j] = Number.MAX_SAFE_INTEGER
      for (let k = 0; k <= j - 1; k++) {
        const q = m[i][k] + m[k + 1][j] + p[i - 1] * p[k] * p[j]
        console.log('i,j', i, j)
        if (q < m[i][j]) {
          m[i][j] = q
          s[i][j] = k
        }
      }
    }
  }
	// const bestMethod = getBestMethod(s, 1, length - 1, '')
  // console.log('bestMethod', bestMethod)   // ([A1]([A2]([A3][A4])))
  return m[1][length - 1]
}
```
##### è¿”å›ç»“æœ
```javascript

/**
 * æœ€ä½³çŸ©é˜µç›¸ä¹˜ç»„åˆæ–¹å¼
 * @param s å®Œæ•´çŸ©é˜µ
 * @param i
 * @param j
 * @param str
 * @returns
 */
const getBestMethod = (s: number[][], i: number, j: number, str: string) => {
  if (i == j) {
    // console.log(`[A${i}]`)
    str += `[A${i}]`
  } else {
    // console.log('(')
    let a = '(' + getBestMethod(s, i, s[i][j], str)
    let b = getBestMethod(s, s[i][j] + 1, j, str) + ')'
    // console.log(')')
    str = str + a + b
  }
  return str
}
```
## ğŸ‘‰æ€»ç»“å½’çº³
### æ¢³ç†
ä¸€èˆ¬å½“é¢˜è§£ä¸­æ¶‰åŠâ€œæœ€â€å€¼çš„è®¡ç®—ï¼Œé‚£ä¹ˆå¯èƒ½å¯ä»¥è€ƒè™‘ä¸€ä¸‹åŠ¨æ€è§„åˆ’çš„æ€è·¯ã€‚
**æœ€ä¼˜å­ç»“æ„æ€§è´¨å†ç†è§£**
ä¾‹å¦‚ï¼šåœ¨ç¡¬å¸æ‰¾é›¶å®ç°è¿‡ç¨‹ä¸­ï¼Œå…¶å®æ˜¯åœ¨é€æ­¥æ‰¾æ¯ä¸ªamountèŒƒå›´å†…çš„é‡‘é¢çš„æ‰¾é’±æ–¹æ³•ï¼Œâ€œå­é—®é¢˜æœ€ä¼˜è§£â€å³1,2,3,...nä¸ªé‡‘é¢çš„æœ€ä¼˜è§£ï¼Œå› æ­¤å¯¹äºamountè€Œè¨€ï¼Œåœ¨è¿™äº›å­é—®é¢˜ä¸­å¿…ç„¶å­˜åœ¨å¯ä»¥æ„æˆå…¶è¾¾æˆæœ€ä¼˜è§£çš„æ–¹æ³•ï¼Œå°†dpä¸­å­˜å‚¨çš„å­é—®é¢˜è§£ç›´æ¥å–å‡ºä¸ç”¨å†è®¡ç®—å°±æ˜¯è§„åˆ’çš„æ„ä¹‰ä¹‹ä¸€ï¼›åœ¨åˆ‡ç»³å­çš„å®ç°è¿‡ç¨‹ä¸­ï¼Œä¹Ÿæ˜¯åœ¨é€æ­¥æ‰¾né•¿åº¦èŒƒå›´å†…çš„å­é—®é¢˜æœ€ä¼˜è§£ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåˆ‡ç»³å­çš„ç»“æœåˆ†ä¸ºâ€œåˆ‡ç‚¹â€ä¸¤ç«¯çš„â€œå­é—®é¢˜â€ï¼Œè€Œå¯¹äºâ€œåˆ‡ç‚¹â€ä¹‹åçš„é—®é¢˜ï¼Œåœ¨â€œåˆ‡ç‚¹â€ä¹‹å‰å·²ç»æ‰¾è¿‡äº†ï¼Œå› æ­¤éœ€è¦æ§åˆ¶è®¡ç®—dp[i]çš„èŒƒå›´ä¸ºå½“å‰é•¿åº¦çš„ä¸€åŠå³å¯ã€‚

**å­é—®é¢˜é‡å æ€§è´¨å†ç†è§£**
ä¾‹å¦‚ï¼šåœ¨ç¡¬å¸æ‰¾é›¶è¿‡ç¨‹ä¸­ï¼Œä»¥æ‰¾16å…ƒä¸ºä¾‹ï¼Œå‰é¢å·²è®¡ç®—å‡ºäº†1ï¼Œ2ï¼Œ3ï¼Œ... 15å…ƒçš„æ‰¾é’±æ–¹å¼ï¼Œ16å…ƒå¯ä»¥æ˜¯ä»–æœ¬èº«å‡å»ä¸€ä¸ªé‡‘é¢ä¹‹å+dp[å°äº16çš„æ•°]çš„ç»“æœï¼Œè€Œæ— éœ€å†ä¾æ¬¡è®¡ç®—ä»–çš„å­é—®é¢˜ã€‚

**æ— åæ•ˆæ€§å†ç†è§£**
ä¾‹å¦‚ï¼šåœ¨æœ€é•¿é€’å¢åºåˆ—æ±‚è§£è¿‡ç¨‹ä¸­ï¼Œå½“ç¡®å®šäº†ä»¥iä½ç½®ä¸ºåŸºå‡†çš„æœ€é•¿åºåˆ—ä¹‹åï¼Œä¹‹åæ±‚è§£i+1,i+2...n-1ä½ç½®çš„æœ€é•¿åºåˆ—éƒ½ä¸ä¼šå†å½±å“iä½ç½®çš„ç»“æœã€‚

åœ¨é¢„è®¡å¯èƒ½å¯ä»¥é‡‡ç”¨åŠ¨æ€è§„åˆ’è§£é¢˜ä¹‹å‰ï¼Œè¦å…ˆå°è¯•å¸¦å…¥å…·ä½“å€¼æ˜¯å¦æ»¡è¶³ä»¥ä¸Šä¸‰ä¸ªæ€§è´¨ï¼Œå†è¿›è¡Œå½’çº³ç¡®å®šå­—ç»“æ„æ±‚è§£çš„å…·ä½“æ–¹æ¡ˆï¼Œç¡®å®šmaxæˆ–minè¿­ä»£æ›´æ–°çš„æ¡ä»¶ï¼Œä»è€Œæ›´æ–°dp[i]ã€‚

### æŠ€å·§
æ„é€ æ•°ç»„,åœ¨ä¸å±äºé¢˜ç›®ä¸»è¦è€ƒå¯ŸèŒƒå›´çš„æƒ…å†µä¸‹ä½¿ç”¨
```typescript
const dp: number[] = new Array(n).fill(0) // ä¸€ç»´
const dp: number[][] = new Array(m).fill(0).map(() => new Array(n).fill(0)) // äºŒç»´
const dp: number[][] = Array.from(Array(m), () => Array(n).fill(0))  // äºŒç»´
```

## èµ„æ–™
æ‰¾é›¶é’±
[ç‚¹å‡»æŸ¥çœ‹ã€bilibiliã€‘](https://player.bilibili.com/player.html?bvid=BV1cT4y1w7Ct)

ç¤ºä¾‹åˆ‡ç»³å­è¿‡ç¨‹å¾ˆæ¸…æ™°

èƒŒåŒ…é—®é¢˜
[ç‚¹å‡»æŸ¥çœ‹ã€bilibiliã€‘](https://player.bilibili.com/player.html?bvid=BV1K4411X766)
[ç‚¹å‡»æŸ¥çœ‹ã€bilibiliã€‘](https://player.bilibili.com/player.html?bvid=BV1g7411B7SP)


[ç‚¹å‡»æŸ¥çœ‹ã€bilibiliã€‘](https://player.bilibili.com/player.html?bvid=BV1XY4y1w7EN)

